(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{46160:function(e,t,n){"use strict";t.Z=void 0;var l,r=(0,((l=n(65129))&&l.__esModule?l:{default:l}).default)("M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z","DotsVertical");t.Z=r},38299:function(e,t,n){"use strict";t.Z=void 0;var l,r=(0,((l=n(65129))&&l.__esModule?l:{default:l}).default)("M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z","TrashCanOutline");t.Z=r},34233:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/batches/list",function(){return n(16620)}])},15271:function(e,t,n){"use strict";n.d(t,{A4:function(){return a},Dm:function(){return i},Yd:function(){return d},_n:function(){return o},ix:function(){return c}});let l=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],a=e=>{let t=e.split("-"),n=t[2],r=l[parseInt(t[1])-1],a=t[0];return"".concat(n," ").concat(r," ").concat(a)},i=e=>{let t=e.split("-"),n=t[2],r=l[parseInt(t[1])-1],a=t[0];return"".concat(n," ").concat(r," ").concat(a)},u=e=>new Date(e),s=e=>"0"!==e.charAt(0)&&1===e.length?"0"+e:e,o=e=>{let t=u(e),n=s(t.getDate().toString()),l=s((t.getMonth()+1).toString()),r=t.getFullYear().toString();return"".concat(r,"-").concat(l,"-").concat(n)},d=e=>{if(""==e)return"";let t=u(e),n=t.getFullYear()+"-"+s((t.getMonth()+1).toString())+"-"+s(t.getDate().toString())+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();return n},c=e=>{if(""==e)return"";let t=u(e),n=t.getDate()+"/"+r[t.getMonth()]+"/"+t.getHours()+":"+t.getMinutes();return n}},4090:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});let l=e=>e.charAt(0).toUpperCase()+e.slice(1)},16620:function(e,t,n){"use strict";n.r(t);var l=n(85893),r=n(67836),a=n(80562),i=n(73812),u=n(31538),s=n(29630),o=n(79072),d=n(49837),c=n(59742),p=n(91359),h=n(75084),m=n(62443),b=n(67294),x=n(10667),f=n(9473),v=n(18424),g=n(46160),j=n(38299),y=n(3690),Z=n(32912),I=n(45225),C=n(9198),T=n.n(C);n(95828);var P=n(59232),S=n(32945),_=n(52909),M=n(15271),w=n(41664),A=n.n(w),V=n(4090),D=n(13897);let L=(0,b.forwardRef)((e,t)=>{let n=null!==e.start?(0,Z.default)(e.start,"yyyy/MM/dd"):"",a=null!==e.end?" - ".concat((0,Z.default)(e.end,"yyyy/MM/dd")):null,i="".concat(n).concat(null!==a?a:"");null===e.start&&e.dates.length&&e.setDates&&e.setDates([]);let u={...e};return delete u.setDates,(0,l.jsx)(r.Z,{fullWidth:!0,inputRef:t,...u,label:e.label||"",value:i})}),O=e=>{let{id:t}=e,[n,r]=(0,b.useState)(null),s=Boolean(n),o=D.Z.urlBase,d=(0,f.I0)(),c=(0,v.a)(),p=c.token,h=()=>{d((0,P.ci)({token:p,batch_id:t}))},m=e=>{r(e.currentTarget)},x=()=>{r(null)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{size:"small",onClick:m,children:(0,l.jsx)(g.Z,{})}),(0,l.jsxs)(i.Z,{keepMounted:!0,anchorEl:n,open:s,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,l.jsxs)(u.Z,{onClick:h,children:[(0,l.jsx)(j.Z,{fontSize:"small",sx:{mr:2}}),"Delete"]}),(0,l.jsx)(A(),{href:"/batches/list/".concat(t),children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(y.Z,{fontSize:"small",sx:{mr:2}}),"List Participants"]})}),(0,l.jsx)(A(),{href:"".concat(o,"/batch/download-schedule/").concat(t),children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(y.Z,{fontSize:"small",sx:{mr:2}}),"Download Schedule Sheet"]})})]})]})},B=[{flex:.1,field:"location",headerName:"Location",renderCell(e){let{row:t}=e;return(0,l.jsx)(s.Z,{variant:"body2",children:t.location})}},{flex:.1,field:"start_date",headerName:"Start Date",renderCell(e){let{row:t}=e;return(0,l.jsx)(s.Z,{variant:"body2",children:t.start_date})}},{flex:.1,field:"course_name",headerName:"Course",renderCell(e){let{row:t}=e;return(0,l.jsx)(s.Z,{variant:"body2",children:t.course_name})}},{flex:.1,field:"batch_type",headerName:"Batch Type",renderCell(e){let{row:t}=e;return(0,l.jsx)(s.Z,{variant:"body2",children:(0,V.f)(t.batch_type)})}},{flex:.1,field:"trainer_name",headerName:"Trainer",renderCell(e){let{row:t}=e;return(0,l.jsx)(s.Z,{variant:"body2",children:t.trainer_name})}},{flex:.1,minWidth:90,sortable:!1,field:"actions",headerName:"Actions",renderCell(e){let{row:t}=e;return(0,l.jsx)(O,{id:t.id})}}];t.default=function(){let[e,t]=(0,b.useState)([]),[n,r]=(0,b.useState)([]),[a,i]=(0,b.useState)(10),[u,s]=(0,b.useState)(""),[g,j]=(0,b.useState)(null),[y,C]=(0,b.useState)(null),[w,A]=(0,b.useState)([]),[V,D]=(0,b.useState)([]),[O,H]=(0,b.useState)(!1),[N,k]=(0,b.useState)([]),E=(0,f.I0)(),z=(0,f.v9)(e=>e.batches),F=(0,f.v9)(e=>e.courses),q=(0,v.a)(),J=q.token,W=e=>{s(e)};(0,b.useEffect)(()=>{E((0,_.gS)({token:J})),E((0,P.im)({token:J})),E((0,P.p8)({token:J}))},[E,J]),(0,b.useEffect)(()=>{let e=z.batchTypes.map(e=>({label:e.name,value:e.id}));r(e)},[u,z.batchTypes]),(0,b.useEffect)(()=>{let e=[];z.trainers.map(t=>{e.push({label:t.name,value:t.id})}),k(e)},[z.trainers]),(0,b.useEffect)(()=>{if(F.allCourses.length){let e=F.allCourses.map(e=>({label:e.name,value:e.id.toString()}));D(e)}},[F.allCourses]);let R=e=>{let[t,n]=e;null!==t&&null!==n&&A(e),C(t),j(n)},X=()=>{if(y&&g){let e=(0,Z.default)(y,"yyyy-MM-dd"),t=(0,Z.default)(g,"yyyy-MM-dd");E((0,P.Mg)({token:J,dates:{start_date:e,end_date:t}}))}},Y=()=>{H(!0)},Q=e=>{let t=Object.values(e.input[0])[0],n=Object.values(e.input[1])[0],l=Object.values(e.input[2])[0],r=Object.values(e.input[3])[0],a=Object.values(e.input[4])[0],i=Object.values(e.input[5])[0];E((0,P.nM)({token:J,batch:{location:t,start_date:(0,M.Yd)(n),course_id:parseInt(l),batch_type:r,trainer_id:a,mode:i}}))};return(0,b.useEffect)(()=>{let e=z.allBatches.filter(e=>e.location.toLowerCase().includes(u.toLowerCase())||e.course_name.toLowerCase().includes(u.toLowerCase())||e.batch_type);t(e)},[u,z.allBatches]),(0,l.jsxs)(o.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(o.ZP,{item:!0,xs:12,children:(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(c.Z,{title:"Filters"}),(0,l.jsx)(p.Z,{children:(0,l.jsxs)(o.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(I.Z,{children:(0,l.jsx)(T(),{isClearable:!0,selectsRange:!0,monthsShown:2,endDate:g,selected:y,startDate:y,shouldCloseOnSelect:!1,id:"date-range-picker-months",onChange:R,customInput:(0,l.jsx)(L,{dates:w,setDates:A,label:"Date Range",end:g,start:y})})})}),(0,l.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(h.Z,{sx:{mb:2},onClick:X,variant:"contained",children:"Fetch Data"})})]})})]})}),(0,l.jsx)(o.ZP,{item:!0,xs:12}),(0,l.jsx)(o.ZP,{item:!0,xs:12,children:(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(x.Z,{exportFileName:"All Batches",exportData:(()=>{let t=e.map(e=>({Location:e.location,"Start Date":e.start_date,Course:e.course_name}));return t})(),handleFilter:W,searchBoxText:"Search Batches",value:u,actionButtonText:"Create New Batch",actionButtonDrawerToggle:Y,actionButtonType:"drawer"}),(0,l.jsx)(m._,{autoHeight:!0,pagination:!0,rows:e,columns:B,disableSelectionOnClick:!0,pageSize:Number(a),rowsPerPageOptions:[10,25,50],onPageSizeChange:e=>i(e)})]})}),(0,l.jsx)(S.Z,{drawerTitle:"Add New Batch",isOpen:O,setIsOpen:H,submitButtonText:"Add",inputs:[{inputId:"location",inputLabel:"Location",inputType:"select",inputLabelId:"location-label",gridProps:{mb:6},menuItems:[{label:"DXB",value:"DXB"},{label:"AUH",value:"AUH"}]},{inputId:"start_date",inputLabel:"Start Date",inputType:"datetime",inputLabelId:"start-date-label",gridProps:{mb:6}},{inputId:"course_name",inputLabel:"Course",inputType:"select",inputLabelId:"course-label",gridProps:{mb:6},menuItems:V},{inputId:"batch_type",inputLabel:"Batch Type",inputType:"select",inputLabelId:"batch-type-label",gridProps:{mb:6},menuItems:n},{inputId:"trainer_name",inputLabel:"Trainer Name",inputType:"select",inputLabelId:"trainer-name-label",gridProps:{mb:6},menuItems:N},{inputId:"batch_mode",inputLabel:"Batch Mode",inputType:"select",inputLabelId:"batch-mode-label",gridProps:{mb:6},menuItems:[{label:"Online",value:"Online"},{label:"Physical",value:"Physical"},{label:"Hybrid",value:"Hybrid"}]}],onSubmit:Q})]})}},40883:function(e,t,n){"use strict";var l=n(85893),r=n(79072),a=n(67836),i=n(32631);n(67294);var u=n(87536),s=n(40328),o=n(79987),d=n(45459),c=n(52359),p=n(63719);t.Z=function(e){var t;return(0,l.jsxs)(r.ZP,{item:!0,...e.gridProps,children:[(0,l.jsx)(u.Qr,{name:e.name,control:e.control,defaultValue:e.defaultValue,rules:null!==(t=e.rules)&&void 0!==t?t:{required:!0},render(t){let{field:{value:n,onChange:r}}=t;return(0,l.jsx)(c._,{dateAdapter:p.H,children:e.type&&"time"===e.type?(0,l.jsx)(d.j,{label:e.label,value:n,onChange:r,renderInput:e=>(0,l.jsx)(a.Z,{sx:{width:"100%"},onChange:r,value:n,...e})}):e.time?(0,l.jsx)(o.x,{label:e.label,value:n,onChange:r,renderInput:e=>(0,l.jsx)(a.Z,{sx:{width:"100%"},onChange:r,value:n,...e})}):(0,l.jsx)(s.M,{label:e.label,value:n,onChange:r,renderInput:e=>(0,l.jsx)(a.Z,{sx:{width:"100%"},onChange:r,value:n,...e})})})}}),e.error&&(0,l.jsx)(i.Z,{sx:{mx:3.5,color:"error.main"},id:e.description,children:"This field is required"})]})}},32945:function(e,t,n){"use strict";var l=n(85893),r=n(64631),a=n(67074),i=n(29630),u=n(61953),s=n(87536),o=n(42734),d=n(48621),c=n(39673),p=n(40883),h=n(75084),m=n(67294);let b=(0,a.ZP)(u.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(3,4),justifyContent:"space-between",backgroundColor:t.palette.background.default}}),x=e=>{var t,n,a,x,f,v;let g=(()=>{let t={input:[]};return e.inputs.forEach(e=>{let n={};if("select-multiple"===e.inputType)n[e.inputId]=[];else{var l;n[e.inputId]=null!==(l=e.defaultValue)&&void 0!==l?l:""}t.input.push(n)}),t})(),{reset:j,control:y,watch:Z,handleSubmit:I,formState:{errors:C}}=(0,s.cI)({defaultValues:g,mode:"onChange"}),T=t=>{e.setIsOpen(!1),j(),e.onSubmit(t)},P=()=>{e.setIsOpen(!1),j()},S=t=>{var n;return null===(n=e.inputs.find(e=>e.inputId===t))||void 0===n?void 0:n.menuItems},_=Z();return(0,m.useEffect)(()=>{e.inputs.forEach(e=>{e.onChange&&e.onChange(_.input)})},[_]),(0,l.jsxs)(r.ZP,{open:e.isOpen,anchor:"right",variant:"temporary",onClose:P,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,l.jsxs)(b,{children:[(0,l.jsx)(i.Z,{variant:"h6",children:e.drawerTitle}),(0,l.jsx)(o.Z,{fontSize:"small",onClick:P,sx:{cursor:"pointer"}})]}),(0,l.jsx)(u.Z,{sx:{p:5},children:(0,l.jsxs)("form",{onSubmit:I(T),children:[e.inputs.map((e,r)=>{var a,i;return"select"===e.inputType?(0,l.jsx)(c.Z,{defaultValue:e.defaultValue,name:"input.".concat(r,".").concat(e.inputId),label:e.inputLabel,labelId:e.inputLabelId,inputId:e.inputId,menuItems:null!==(t=S(e.inputId))&&void 0!==t?t:[],control:y,description:"".concat(e.inputId,"-description"),error:null==C?void 0:null===(a=C.input)||void 0===a?void 0:null===(i=a[r])||void 0===i?void 0:i[e.inputId],gridProps:null!==(n=e.gridProps)&&void 0!==n?n:{}},r):null}),e.inputs.map((e,t)=>{var n,r;return"select-multiple"===e.inputType?(0,l.jsx)(c.Z,{multiple:!0,defaultValue:e.defaultValue,name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,labelId:e.inputLabelId,inputId:e.inputId,menuItems:null!==(a=S(e.inputId))&&void 0!==a?a:[],control:y,description:"".concat(e.inputId,"-description"),error:null==C?void 0:null===(n=C.input)||void 0===n?void 0:null===(r=n[t])||void 0===r?void 0:r[e.inputId],gridProps:null!==(x=e.gridProps)&&void 0!==x?x:{}},t):null}),e.inputs.map((e,t)=>{var n,r;return"text"===e.inputType||"textarea"==e.inputType||"number"==e.inputType||"email"==e.inputType?(0,l.jsx)(d.Z,{defaultValue:e.defaultValue,name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,control:y,description:"".concat(e.inputId,"-description"),error:null==C?void 0:null===(n=C.input)||void 0===n?void 0:null===(r=n[t])||void 0===r?void 0:r[e.inputId],type:e.inputType,gridProps:null!==(f=e.gridProps)&&void 0!==f?f:{},rows:"textarea"===e.inputType?6:1,multiline:"textarea"===e.inputType,rules:e.rules},t):null}),e.inputs.map((e,t)=>{var n,r;return"date"===e.inputType||"datetime"===e.inputType||"time"===e.inputType?(0,l.jsx)(p.Z,{defaultValue:e.defaultValue,name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,control:y,type:e.inputType,description:"".concat(e.inputId,"-description"),error:null==C?void 0:null===(n=C.input)||void 0===n?void 0:null===(r=n[t])||void 0===r?void 0:r[e.inputId],gridProps:null!==(v=e.gridProps)&&void 0!==v?v:{},time:"datetime"===e.inputType},t):null}),(0,l.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(h.Z,{size:"large",type:"submit",variant:"contained",sx:{mr:3},children:e.submitButtonText}),(0,l.jsx)(h.Z,{size:"large",variant:"outlined",color:"secondary",onClick:P,children:"Cancel"})]})]})})]})};t.Z=x},39673:function(e,t,n){"use strict";var l=n(85893),r=n(31538),a=n(79072),i=n(55343),u=n(58316),s=n(53442),o=n(32631),d=n(87536);n(67294),t.Z=function(e){var t,n,c;let p=null===(t=e.menuItems)||void 0===t?void 0:t.map(e=>(0,l.jsx)(r.Z,{value:e.value,children:e.label},e.value));return(0,l.jsx)(a.ZP,{item:!0,...e.gridProps,children:(0,l.jsxs)(i.Z,{fullWidth:!0,children:[(0,l.jsx)(d.Qr,{name:e.name,control:e.control,defaultValue:e.defaultValue,rules:null!==(n=e.rules)&&void 0!==n?n:{required:!0},render(t){let{field:{value:n,onChange:r}}=t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{id:e.labelId,children:e.label}),(0,l.jsx)(s.Z,{fullWidth:!0,value:n,id:e.inputId,label:e.label,onChange:r,error:Boolean(e.error),labelId:e.labelId,"aria-describedby":e.description,inputProps:{placeholder:"Select ".concat(e.label)},multiple:null!==(c=e.multiple)&&void 0!==c&&c,children:p})]})}}),e.error&&(0,l.jsx)(o.Z,{sx:{color:"error.main"},id:e.description,children:"This field is required"})]})})}},48621:function(e,t,n){"use strict";var l=n(85893),r=n(79072),a=n(55343),i=n(67836),u=n(32631);n(67294);var s=n(87536);let o=e=>{var t,n,o,d;return(0,l.jsx)(r.ZP,{item:!0,xs:12,...e.gridProps,children:(0,l.jsxs)(a.Z,{fullWidth:!0,children:[(0,l.jsx)(s.Qr,{name:e.name,control:e.control,defaultValue:e.defaultValue,rules:null!==(t=e.rules)&&void 0!==t?t:{required:!0},render(t){let{field:{value:r,onChange:a}}=t;return(0,l.jsx)(i.Z,{value:r,label:e.label,type:null!==(n=e.type)&&void 0!==n?n:"string",onChange:a,placeholder:e.label,error:Boolean(e.error),"aria-describedby":e.description,rows:null!==(o=e.rows)&&void 0!==o?o:1,multiline:null!==(d=e.multiline)&&void 0!==d&&d})}}),e.error&&(0,l.jsx)(u.Z,{sx:{color:"error.main"},id:e.description,children:"This field is required"})]})})};t.Z=o}},function(e){e.O(0,[891,842,661,536,215,292,962,286,774,888,179],function(){return e(e.s=34233)}),_N_E=e.O()}]);