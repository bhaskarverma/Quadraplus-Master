(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{77745:function(e,t,n){"use strict";var i=n(87462),a=n(63366),l=n(67294),r=n(86010),s=n(94780),o=n(29630),d=n(67074),u=n(78884),c=n(32941),p=n(15156),m=n(85893);let x=["className","id"],h=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},c.a,t)},v=(0,d.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),f=l.forwardRef(function(e,t){let n=(0,u.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:o}=n,d=(0,a.Z)(n,x),c=h(n),{titleId:f=o}=l.useContext(p.Z);return(0,m.jsx)(v,(0,i.Z)({component:"h2",className:(0,r.Z)(c.root,s),ownerState:n,ref:t,variant:"h6",id:f},d))});t.Z=f},59920:function(e,t,n){"use strict";t.Z=void 0;var i,a=(0,((i=n(65129))&&i.__esModule?i:{default:i}).default)("M5,6H23V18H5V6M14,9A3,3 0 0,1 17,12A3,3 0 0,1 14,15A3,3 0 0,1 11,12A3,3 0 0,1 14,9M9,8A2,2 0 0,1 7,10V14A2,2 0 0,1 9,16H19A2,2 0 0,1 21,14V10A2,2 0 0,1 19,8H9M1,10H3V20H19V22H1V10Z","CashMultiple");t.Z=a},4620:function(e,t,n){"use strict";t.Z=void 0;var i,a=(0,((i=n(65129))&&i.__esModule?i:{default:i}).default)("M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z","Reload");t.Z=a},61384:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/batches/list/[id]",function(){return n(77665)}])},77665:function(e,t,n){"use strict";n.r(t);var i=n(85893),a=n(9942),l=n(29630),r=n(61953),s=n(80562),o=n(72389),d=n(29620),u=n(95398),c=n(79072),p=n(49837),m=n(62443),x=n(67294),h=n(10667),v=n(18424);n(95828);var f=n(11163),b=n(96927),Z=n(68045),j=n(59232),y=n(9473),g=n(17785),C=n(4620),_=n(59920),I=n(42734);let P=(0,x.forwardRef)(function(e,t){return(0,i.jsx)(a.Z,{ref:t,...e})}),w=[{field:"payment_method",headerName:"Payment Method",flex:1,renderCell(e){let{row:t}=e;return(0,i.jsx)(l.Z,{variant:"body2",children:t.payment_mode})}},{field:"amount",headerName:"Amount",flex:1,renderCell(e){let{row:t}=e;return(0,i.jsxs)(l.Z,{variant:"body2",children:["AED ",t.amount]})}}],S=e=>{let{row:t}=e,n=(0,y.I0)(),a=(0,v.a)(),c=a.token,p=(0,f.useRouter)(),{id:h}=p.query,[S,T]=(0,x.useState)([]),[k,A]=(0,x.useState)(5),[N,B]=(0,x.useState)(!1),[O,L]=(0,x.useState)(!1),[D,E]=(0,x.useState)(!1);(0,x.useEffect)(()=>{!async function(){let e=await (0,b.Z)(c).post("/batch/list/available",{batch_id:h,course_id:t.course_id});e.data.batches&&T(e.data.batches.map(e=>({label:"".concat(e.location," - ").concat(e.course_name," - ").concat(e.start_date),value:e.id.toString()})))}()},[h,c,t.course_id]);let R=()=>{B(!0)},V=()=>{L(!0)},z=()=>{E(!0)},H=e=>{let i=Object.values(e.input[0])[0],a=Object.values(e.input[1])[0];n((0,j._w)({token:c,batch_group_id:t.id,payment:parseInt(i),payment_method:a})),t.reRender()},M=e=>{let i=Object.values(e.input[0])[0];n((0,j.y)({batch_group_id:t.id,batch_id:parseInt(i),token:c})),t.reRender()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(s.Z,{size:"small",onClick:R,disabled:t.paid_amt==t.total_amt,children:(0,i.jsx)(o.Z,{title:"Add Payment",children:(0,i.jsx)(g.Z,{fontSize:"small"})})}),(0,i.jsx)(s.Z,{size:"small",onClick:V,children:(0,i.jsx)(o.Z,{title:"Reassign Batch",children:(0,i.jsx)(C.Z,{fontSize:"small"})})}),(0,i.jsx)(s.Z,{size:"small",onClick:z,children:(0,i.jsx)(o.Z,{title:"Payment Details",children:(0,i.jsx)(_.Z,{fontSize:"small"})})})]}),(0,i.jsx)(Z.Z,{dialogTitle:"Reassign Batch",isOpen:O,setIsOpen:L,submitButtonText:"Reassign",onSubmit:M,maxWidth:"md",inputs:[{inputLabel:"New Batch",inputLabelId:"new-batch-label",inputId:"new-batch-input",inputType:"select",menuItems:S,gridProps:{md:6,mb:6}}]}),(0,i.jsx)(Z.Z,{dialogTitle:"Add Payment",isOpen:N,setIsOpen:B,submitButtonText:"Add",onSubmit:H,maxWidth:"md",inputs:[{inputId:"payment-amount",inputType:"number",inputLabel:"Payment Amount",inputLabelId:"payment-amount-label",gridProps:{mb:6,md:4}},{inputId:"payment-method",inputType:"select",inputLabel:"Payment Method",inputLabelId:"payment-method-label",menuItems:[{value:"Cash",label:"Cash"},{value:"Online",label:"Online"},{value:"Credit Card",label:"Credit Card"},{value:"Bank Deposit",label:"Bank Deposit"},{value:"Bank Transfer",label:"Bank Transfer"},{value:"Referral",label:"Referral"}],gridProps:{mb:6,md:4}}]}),(0,i.jsx)(d.Z,{fullWidth:!0,open:D,maxWidth:"lg",scroll:"body",onClose:()=>E(!1),TransitionComponent:P,onBackdropClick:()=>E(!1),children:(0,i.jsxs)(u.Z,{sx:{px:{xs:8,sm:15},py:{xs:8,sm:12.5},position:"relative"},children:[(0,i.jsx)(s.Z,{size:"small",onClick:()=>E(!1),sx:{position:"absolute",right:"1rem",top:"1rem"},children:(0,i.jsx)(I.Z,{})}),(0,i.jsx)(r.Z,{sx:{mb:4,textAlign:"center"},children:(0,i.jsx)(l.Z,{variant:"h5",sx:{mb:3},children:"Detailed Payment History"})}),(0,i.jsx)(m._,{autoHeight:!0,pagination:!0,rows:t.paymentDetails,columns:w,disableSelectionOnClick:!0,pageSize:Number(k),rowsPerPageOptions:[10,25,50],onPageSizeChange:e=>A(e)})]})})]})},T=[{flex:.1,field:"participant",headerName:"Participant",renderCell(e){let{row:t}=e;return(0,i.jsx)(l.Z,{variant:"body2",children:t.participant})}},{flex:.1,field:"paid_amt",headerName:"Paid Amount",renderCell(e){let{row:t}=e;return(0,i.jsxs)(l.Z,{variant:"body2",children:["AED ",t.paid_amt]})}},{flex:.1,field:"total_amt",headerName:"Total Amount",renderCell(e){let{row:t}=e;return(0,i.jsxs)(l.Z,{variant:"body2",children:["AED ",t.total_amt]})}},{flex:.1,field:"balance_amt",headerName:"Balance Amount",renderCell(e){let{row:t}=e;return(0,i.jsxs)(l.Z,{variant:"body2",children:["AED ",t.total_amt-t.paid_amt]})}},{flex:.1,field:"payment_status",headerName:"Payment Status",renderCell(e){let{row:t}=e;return(0,i.jsx)(l.Z,{variant:"body2",children:t.payment_status})}},{flex:.1,field:"actions",headerName:"Actions",renderCell(e){let{row:t}=e;return(0,i.jsx)(S,{row:t})}}];t.default=function(){let[e,t]=(0,x.useState)([]),[n,a]=(0,x.useState)([]),[l,r]=(0,x.useState)(10),[s,o]=(0,x.useState)(""),[d,u]=(0,x.useState)(0),Z=(0,f.useRouter)(),{id:j}=Z.query,[y,g]=(0,x.useState)(!1),C=(0,v.a)(),_=C.token,I=e=>{o(e)};(0,x.useEffect)(()=>{let t=e.filter(e=>e.participant.toLowerCase().includes(s.toLowerCase())||e.payment_status.toLowerCase().includes(s.toLowerCase())||e.paid_amt.toString().includes(s)||e.total_amt.toString().includes(s));a(t)},[e,s]),(0,x.useEffect)(()=>{j&&async function(){let e=await (0,b.Z)(_).get("/course/IDByBatch/".concat(j));u(e.data.courseId)}()},[j,_]);let P=Z.query.id;return(0,x.useEffect)(()=>{(async function(){let e=await (0,b.Z)(_).post("/batch/list/group",{batch_id:P}),n=e.data.groups.map(e=>(e.reRender=()=>{g(!y)},e.course_id=d,e));t(n)})()},[P,_,y,d]),(0,i.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(c.ZP,{item:!0,xs:12}),(0,i.jsx)(c.ZP,{item:!0,xs:12,children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(h.Z,{exportFileName:"All Participants",exportData:(()=>{let t=e.map(e=>({Participant:e.participant,"Paid Amount":e.paid_amt,"Total Amount":e.total_amt,"Payment Method":e.payment_method,"Payment Status":e.payment_status}));return t})(),handleFilter:I,searchBoxText:"Search Participants",value:s}),(0,i.jsx)(m._,{autoHeight:!0,pagination:!0,rows:n,columns:T,disableSelectionOnClick:!0,pageSize:Number(l),rowsPerPageOptions:[10,25,50],onPageSizeChange:e=>r(e)})]})})]})}},10667:function(e,t,n){"use strict";var i=n(85893),a=n(61953),l=n(75084),r=n(67836),s=n(83461),o=n(95534),d=n(41664),u=n.n(d),c=n(18424);let p=e=>{var t,n;let{handleFilter:d,value:p,actionButtonText:m,searchBoxText:x,actionButtonType:h}=e,v=()=>{},f=(0,c.a)(),b=null==f?void 0:null===(t=f.user)||void 0===t?void 0:t.type;return(0,i.jsxs)(a.Z,{sx:{p:5,pb:3,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[e.exportFileName&&e.exportData&&"admin"==b&&(0,i.jsx)(s.CSVLink,{style:{textDecoration:"none"},data:e.exportData,filename:e.exportFileName,children:(0,i.jsx)(l.Z,{sx:{mr:4,mb:2},color:"secondary",variant:"outlined",onClick:v,startIcon:(0,i.jsx)(o.Z,{fontSize:"small"}),children:"Export"})}),(0,i.jsxs)(a.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,i.jsx)(r.Z,{size:"small",value:p,sx:{mr:4,mb:2},placeholder:x,onChange:e=>d(e.target.value)}),"link"===h?(0,i.jsx)(u(),{href:null!==(n=e.actionButtonLinkPath)&&void 0!==n?n:"#",children:(0,i.jsx)(l.Z,{sx:{mb:2},variant:"contained",children:m})}):"","drawer"===h?(0,i.jsx)(l.Z,{sx:{mb:2},onClick:e.actionButtonDrawerToggle,variant:"contained",children:m}):"","function"===h?(0,i.jsx)(l.Z,{sx:{mb:2},onClick:e.actionButtonFunction,variant:"contained",children:m}):""]})]})};t.Z=p},40883:function(e,t,n){"use strict";var i=n(85893),a=n(79072),l=n(67836),r=n(32631);n(67294);var s=n(87536),o=n(68269),d=n(79987),u=n(45459),c=n(5344),p=n(66448);t.Z=function(e){var t;return(0,i.jsxs)(a.ZP,{item:!0,...e.gridProps,children:[(0,i.jsx)(s.Qr,{name:e.name,control:e.control,defaultValue:e.defaultValue,rules:null!==(t=e.rules)&&void 0!==t?t:{required:!0},render(t){let{field:{value:n,onChange:a}}=t;return(0,i.jsx)(c.Z,{dateAdapter:p.Z,children:e.type&&"time"===e.type?(0,i.jsx)(u.j,{label:e.label,value:n,onChange:a,renderInput:e=>(0,i.jsx)(l.Z,{sx:{width:"100%"},onChange:a,value:n,...e})}):e.time?(0,i.jsx)(d.x,{label:e.label,value:n,onChange:a,renderInput:e=>(0,i.jsx)(l.Z,{sx:{width:"100%"},onChange:a,value:n,...e})}):(0,i.jsx)(o.Z,{label:e.label,value:n,onChange:a,renderInput:e=>(0,i.jsx)(l.Z,{sx:{width:"100%"},onChange:a,value:n,...e})})})}}),e.error&&(0,i.jsx)(r.Z,{sx:{mx:3.5,color:"error.main"},id:e.description,children:"This field is required"})]})}},68045:function(e,t,n){"use strict";var i=n(85893),a=n(67294),l=n(75084),r=n(29620),s=n(77745),o=n(95398),d=n(76779),u=n(79072),c=n(39673),p=n(87536),m=n(48621),x=n(40883);let h=e=>{var t,n,h,v;let f=(()=>{let t={input:[]};return e.inputs.forEach(e=>{let n={};n[e.inputId]="",t.input.push(n)}),t})(),{control:b,handleSubmit:Z,reset:j,formState:{errors:y}}=(0,p.cI)({defaultValues:f}),g=()=>{e.setIsOpen(!1),j()},C=t=>{e.setIsOpen(!1),j(),e.onSubmit(t)},_=()=>{};(0,a.useEffect)(()=>{e.setIsOpen(e.isOpen)},[e]);let I=t=>{var n;return null===(n=e.inputs.find(e=>e.inputId===t))||void 0===n?void 0:n.menuItems};return(0,i.jsx)("div",{children:(0,i.jsxs)(r.Z,{maxWidth:e.maxWidth,fullWidth:!0,open:e.isOpen,onClose:g,children:[(0,i.jsx)(s.Z,{children:e.dialogTitle}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(u.ZP,{container:!0,spacing:5,children:[e.inputs.map((e,a)=>{var l,r;return"select"===e.inputType?(0,i.jsx)(c.Z,{name:"input.".concat(a,".").concat(e.inputId),label:e.inputLabel,labelId:e.inputLabelId,inputId:e.inputId,menuItems:null!==(t=I(e.inputId))&&void 0!==t?t:[],control:b,description:"".concat(e.inputId,"-description"),error:null==y?void 0:null===(l=y.input)||void 0===l?void 0:null===(r=l[a])||void 0===r?void 0:r[e.inputId],gridProps:null!==(n=e.gridProps)&&void 0!==n?n:{}},a):null}),e.inputs.map((e,t)=>{var n,a;return"text"===e.inputType||"textarea"==e.inputType||"number"==e.inputType||"email"==e.inputType?(0,i.jsx)(m.Z,{name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,control:b,description:"".concat(e.inputId,"-description"),error:null==y?void 0:null===(n=y.input)||void 0===n?void 0:null===(a=n[t])||void 0===a?void 0:a[e.inputId],type:e.inputType,gridProps:null!==(h=e.gridProps)&&void 0!==h?h:{},rows:"textarea"===e.inputType?6:1,multiline:"textarea"===e.inputType},t):null}),e.inputs.map((e,t)=>{var n,a;return"date"===e.inputType||"datetime"===e.inputType?(0,i.jsx)(x.Z,{name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,control:b,description:"".concat(e.inputId,"-description"),error:null==y?void 0:null===(n=y.input)||void 0===n?void 0:null===(a=n[t])||void 0===a?void 0:a[e.inputId],gridProps:null!==(v=e.gridProps)&&void 0!==v?v:{},time:"datetime"===e.inputType},t):null})]})}),(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(l.Z,{onClick:g,variant:"outlined",children:"Cancel"}),(0,i.jsx)(l.Z,{onClick:Z(C,_),variant:"outlined",children:e.submitButtonText})]})]})})};t.Z=h},39673:function(e,t,n){"use strict";var i=n(85893),a=n(31538),l=n(79072),r=n(55343),s=n(58316),o=n(53442),d=n(32631),u=n(87536);n(67294),t.Z=function(e){var t,n,c;let p=null===(t=e.menuItems)||void 0===t?void 0:t.map(e=>(0,i.jsx)(a.Z,{value:e.value,children:e.label},e.value));return(0,i.jsx)(l.ZP,{item:!0,...e.gridProps,children:(0,i.jsxs)(r.Z,{fullWidth:!0,children:[(0,i.jsx)(u.Qr,{name:e.name,control:e.control,defaultValue:e.defaultValue,rules:null!==(n=e.rules)&&void 0!==n?n:{required:!0},render(t){let{field:{value:n,onChange:a}}=t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{id:e.labelId,children:e.label}),(0,i.jsx)(o.Z,{fullWidth:!0,value:n,id:e.inputId,label:e.label,onChange:a,error:Boolean(e.error),labelId:e.labelId,"aria-describedby":e.description,inputProps:{placeholder:"Select ".concat(e.label)},multiple:null!==(c=e.multiple)&&void 0!==c&&c,children:p})]})}}),e.error&&(0,i.jsx)(d.Z,{sx:{color:"error.main"},id:e.description,children:"This field is required"})]})})}},48621:function(e,t,n){"use strict";var i=n(85893),a=n(79072),l=n(55343),r=n(67836),s=n(32631);n(67294);var o=n(87536);let d=e=>{var t,n,d,u;return(0,i.jsx)(a.ZP,{item:!0,xs:12,...e.gridProps,children:(0,i.jsxs)(l.Z,{fullWidth:!0,children:[(0,i.jsx)(o.Qr,{name:e.name,control:e.control,defaultValue:e.defaultValue,rules:null!==(t=e.rules)&&void 0!==t?t:{required:!0},render(t){let{field:{value:a,onChange:l}}=t;return(0,i.jsx)(r.Z,{value:a,label:e.label,type:null!==(n=e.type)&&void 0!==n?n:"string",onChange:l,placeholder:e.label,error:Boolean(e.error),"aria-describedby":e.description,rows:null!==(d=e.rows)&&void 0!==d?d:1,multiline:null!==(u=e.multiline)&&void 0!==u&&u})}}),e.error&&(0,i.jsx)(s.Z,{sx:{color:"error.main"},id:e.description,children:"This field is required"})]})})};t.Z=d},95828:function(){}},function(e){e.O(0,[891,661,536,215,686,774,888,179],function(){return e(e.s=61384)}),_N_E=e.O()}]);