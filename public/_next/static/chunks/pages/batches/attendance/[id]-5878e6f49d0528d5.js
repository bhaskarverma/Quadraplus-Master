(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{19398:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/batches/attendance/[id]",function(){return n(41390)}])},41390:function(e,t,n){"use strict";n.r(t);var a=n(85893),i=n(29630),r=n(16056),s=n(79072),o=n(49837),l=n(62443),c=n(67294),u=n(10667),d=n(18424);n(95828);var p=n(11163),x=n(96927),f=n(59232),h=n(9473);t.default=function(){let[e,t]=(0,c.useState)([]),[n,m]=(0,c.useState)([]),[v,g]=(0,c.useState)(10),[j,w]=(0,c.useState)(""),[Z,_]=(0,c.useState)([]),b=(0,h.I0)(),y=(0,d.a)(),C=y.token,S=(0,p.useRouter)();(0,c.useEffect)(()=>{async function t(){let{data:t}=await (0,x.Z)(C).get("/batch/attendance/".concat(S.query.id)),n=[];t.data.map(e=>{n.push({participant:e.participant_id,present:!!e.present})}),0===n.length&&e.map(e=>{n.push({participant:e.id,present:!1})}),_(n)}S.query.id&&t()},[e,S.query.id,C]);let k=e=>{_(t=>{var n;let a=t.findIndex(t=>t.participant===e);return t[a].present=!(null===(n=t[a])||void 0===n?void 0:n.present),[...t]})},P=e=>{var t;let n=Z.findIndex(t=>(null==t?void 0:t.participant)===e);return(null===(t=Z[n])||void 0===t?void 0:t.present)||!1},N=e=>{w(e)},E=()=>{b((0,f.YF)({token:C,attendance:Z,batch_id:S.query.id}))};(0,c.useEffect)(()=>{let t=e.filter(e=>e.participant.toLowerCase().includes(j.toLowerCase())||e.payment_status.toLowerCase().includes(j.toLowerCase())||e.paid_amt.toString().includes(j)||e.total_amt.toString().includes(j));m(t)},[e,j]);let B=S.query.id;return(0,c.useEffect)(()=>{(async function(){let e=await (0,x.Z)(C).post("/batch/list/group",{batch_id:B});t(e.data.groups)})()},[B,C]),(0,a.jsxs)(s.ZP,{container:!0,spacing:6,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12}),(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(u.Z,{actionButtonFunction:E,actionButtonText:"Submit Attendance",actionButtonType:"function",handleFilter:N,searchBoxText:"Search Participants",value:j}),(0,a.jsx)(l._,{autoHeight:!0,pagination:!0,rows:n,columns:[{flex:.1,field:"participant",headerName:"Participant",renderCell(e){let{row:t}=e;return(0,a.jsx)(i.Z,{variant:"body2",children:t.participant})}},{flex:.1,field:"actions",headerName:"Is Present",renderCell(e){let{row:t}=e;return(0,a.jsx)(r.Z,{color:"primary",checked:P(t.id),onChange:()=>k(t.id)})}}],disableSelectionOnClick:!0,pageSize:Number(v),rowsPerPageOptions:[10,25,50],onPageSizeChange:e=>g(e)})]})})]})}},10667:function(e,t,n){"use strict";var a=n(85893),i=n(61953),r=n(75084),s=n(67836),o=n(83461),l=n(95534),c=n(41664),u=n.n(c),d=n(18424);let p=e=>{var t,n;let{handleFilter:c,value:p,actionButtonText:x,searchBoxText:f,actionButtonType:h}=e,m=()=>{},v=(0,d.a)(),g=null==v?void 0:null===(t=v.user)||void 0===t?void 0:t.type;return(0,a.jsxs)(i.Z,{sx:{p:5,pb:3,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[e.exportFileName&&e.exportData&&"admin"==g&&(0,a.jsx)(o.CSVLink,{style:{textDecoration:"none"},data:e.exportData,filename:e.exportFileName,children:(0,a.jsx)(r.Z,{sx:{mr:4,mb:2},color:"secondary",variant:"outlined",onClick:m,startIcon:(0,a.jsx)(l.Z,{fontSize:"small"}),children:"Export"})}),(0,a.jsxs)(i.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,a.jsx)(s.Z,{size:"small",value:p,sx:{mr:4,mb:2},placeholder:f,onChange:e=>c(e.target.value)}),"link"===h?(0,a.jsx)(u(),{href:null!==(n=e.actionButtonLinkPath)&&void 0!==n?n:"#",children:(0,a.jsx)(r.Z,{sx:{mb:2},variant:"contained",children:x})}):"","drawer"===h?(0,a.jsx)(r.Z,{sx:{mb:2},onClick:e.actionButtonDrawerToggle,variant:"contained",children:x}):"","function"===h?(0,a.jsx)(r.Z,{sx:{mb:2},onClick:e.actionButtonFunction,variant:"contained",children:x}):""]})]})};t.Z=p},95828:function(){}},function(e){e.O(0,[891,661,774,888,179],function(){return e(e.s=19398)}),_N_E=e.O()}]);