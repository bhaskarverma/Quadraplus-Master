(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{19398:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/batches/attendance/[id]",function(){return e(41390)}])},41390:function(n,t,e){"use strict";e.r(t);var r=e(34051),i=e.n(r),a=e(85893),o=e(15861),c=e(72852),u=e(86886),s=e(66242),l=e(24156),f=e(67294),d=e(10667),p=e(18424),h=(e(95828),e(11163)),x=e(96927),v=e(59232),m=e(9473);function y(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function w(n,t,e,r,i,a,o){try{var c=n[a](o),u=c.value}catch(s){return void e(s)}c.done?t(u):Promise.resolve(u).then(r,i)}function b(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var a=n.apply(t,e);function o(n){w(a,r,i,o,c,"next",n)}function c(n){w(a,r,i,o,c,"throw",n)}o(void 0)}))}}function g(n){return function(n){if(Array.isArray(n))return y(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return y(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return y(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(){var n=(0,f.useState)([]),t=n[0],e=n[1],r=(0,f.useState)([]),y=r[0],w=r[1],j=(0,f.useState)(10),S=j[0],_=j[1],C=(0,f.useState)(""),Z=C[0],k=C[1],P=(0,f.useState)([]),B=P[0],E=P[1],I=(0,m.I0)(),N=(0,p.a)().token,T=(0,h.useRouter)();(0,f.useEffect)((function(){function n(){return(n=b(i().mark((function n(){var e,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.Z)(N).get("/batch/attendance/".concat(T.query.id));case 2:e=n.sent.data,r=[],e.data.map((function(n){r.push({participant:n.participant_id,present:!!n.present})})),0===r.length&&t.map((function(n){r.push({participant:n.id,present:!1})})),E(r);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}T.query.id&&function(){n.apply(this,arguments)}()}),[t,T.query.id,N]);var A=function(n){var t,e=B.findIndex((function(t){return(null===t||void 0===t?void 0:t.participant)===n}));return(null===(t=B[e])||void 0===t?void 0:t.present)||!1},F=[{flex:.1,field:"participant",headerName:"Participant",renderCell:function(n){var t=n.row;return(0,a.jsx)(o.Z,{variant:"body2",children:t.participant})}},{flex:.1,field:"actions",headerName:"Is Present",renderCell:function(n){var t=n.row;return(0,a.jsx)(c.Z,{color:"primary",checked:A(t.id),onChange:function(){return n=t.id,void E((function(t){var e,r=t.findIndex((function(t){return t.participant===n}));return t[r].present=!(null===(e=t[r])||void 0===e?void 0:e.present)||!1,g(t)}));var n}})}}];(0,f.useEffect)((function(){var n=t.filter((function(n){return n.participant.toLowerCase().includes(Z.toLowerCase())||n.payment_status.toLowerCase().includes(Z.toLowerCase())||n.paid_amt.toString().includes(Z)||n.total_amt.toString().includes(Z)}));w(n)}),[t,Z]);var L=T.query.id;return(0,f.useEffect)((function(){function n(){return(n=b(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.Z)(N).post("/batch/list/group",{batch_id:L});case 2:t=n.sent,e(t.data.groups);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[L,N]),(0,a.jsxs)(u.ZP,{container:!0,spacing:6,children:[(0,a.jsx)(u.ZP,{item:!0,xs:12}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(d.Z,{actionButtonFunction:function(){I((0,v.YF)({token:N,attendance:B,batch_id:T.query.id}))},actionButtonText:"Submit Attendance",actionButtonType:"function",handleFilter:function(n){k(n)},searchBoxText:"Search Participants",value:Z}),(0,a.jsx)(l._,{autoHeight:!0,pagination:!0,rows:y,columns:F,disableSelectionOnClick:!0,pageSize:Number(S),rowsPerPageOptions:[10,25,50],onPageSizeChange:function(n){return _(n)}})]})})]})}},10667:function(n,t,e){"use strict";var r=e(85893),i=e(87357),a=e(44872),o=e(50135),c=e(83461),u=e(95534),s=e(41664),l=e.n(s);t.Z=function(n){var t,e=n.handleFilter,s=n.value,f=n.actionButtonText,d=n.searchBoxText,p=n.actionButtonType;return(0,r.jsxs)(i.Z,{sx:{p:5,pb:3,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[n.exportFileName&&n.exportData&&(0,r.jsx)(c.CSVLink,{style:{textDecoration:"none"},data:n.exportData,filename:n.exportFileName,children:(0,r.jsx)(a.Z,{sx:{mr:4,mb:2},color:"secondary",variant:"outlined",onClick:function(){},startIcon:(0,r.jsx)(u.Z,{fontSize:"small"}),children:"Export"})}),(0,r.jsxs)(i.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,r.jsx)(o.Z,{size:"small",value:s,sx:{mr:4,mb:2},placeholder:d,onChange:function(n){return e(n.target.value)}}),"link"===p?(0,r.jsx)(l(),{href:null!==(t=n.actionButtonLinkPath)&&void 0!==t?t:"#",children:(0,r.jsx)(a.Z,{sx:{mb:2},variant:"contained",children:f})}):"","drawer"===p?(0,r.jsx)(a.Z,{sx:{mb:2},onClick:n.actionButtonDrawerToggle,variant:"contained",children:f}):"","function"===p?(0,r.jsx)(a.Z,{sx:{mb:2},onClick:n.actionButtonFunction,variant:"contained",children:f}):""]})]})}},95828:function(){}},function(n){n.O(0,[806,661,774,888,179],(function(){return t=19398,n(n.s=t);var t}));var t=n.O();_N_E=t}]);