(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{44642:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(63366),r=n(87462),s=n(67294),o=n(86010),a=n(94780),l=n(67074),u=n(78884),d=n(29630),p=n(1588),c=n(34867);function m(e){return(0,c.Z)("MuiDialogContentText",e)}(0,p.Z)("MuiDialogContentText",["root"]);var x=n(85893);let f=["children","className"],Z=e=>{let{classes:t}=e,n=(0,a.Z)({root:["root"]},m,t);return(0,r.Z)({},t,n)},v=(0,l.ZP)(d.Z,{shouldForwardProp:e=>(0,l.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),g=s.forwardRef(function(e,t){let n=(0,u.Z)({props:e,name:"MuiDialogContentText"}),{className:s}=n,a=(0,i.Z)(n,f),l=Z(a);return(0,x.jsx)(v,(0,r.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:a,className:(0,o.Z)(l.root,s)},n,{classes:l}))});var h=g},77745:function(e,t,n){"use strict";var i=n(87462),r=n(63366),s=n(67294),o=n(86010),a=n(94780),l=n(29630),u=n(67074),d=n(78884),p=n(32941),c=n(15156),m=n(85893);let x=["className","id"],f=e=>{let{classes:t}=e;return(0,a.Z)({root:["root"]},p.a,t)},Z=(0,u.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),v=s.forwardRef(function(e,t){let n=(0,d.Z)({props:e,name:"MuiDialogTitle"}),{className:a,id:l}=n,u=(0,r.Z)(n,x),p=f(n),{titleId:v=l}=s.useContext(c.Z);return(0,m.jsx)(Z,(0,i.Z)({component:"h2",className:(0,o.Z)(p.root,a),ownerState:n,ref:t,variant:"h6",id:v},u))});t.Z=v},46160:function(e,t,n){"use strict";t.Z=void 0;var i,r=(0,((i=n(65129))&&i.__esModule?i:{default:i}).default)("M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z","DotsVertical");t.Z=r},29770:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course",function(){return n(79289)}])},79289:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var i=n(85893),r=n(9942),s=n(80562),o=n(73812),a=n(31538),l=n(29620),u=n(95398),d=n(61953),p=n(29630),c=n(85214),m=n(81284),x=n(63366),f=n(87462),Z=n(67294),v=n(86010),g=n(94780),h=n(57742),y=n(67074),b=n(78884),I=n(1588),C=n(34867);function j(e){return(0,C.Z)("MuiListItemAvatar",e)}(0,I.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);let T=["className"],S=e=>{let{alignItems:t,classes:n}=e;return(0,g.Z)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},j,n)},P=(0,y.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver(e,t){let{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(({ownerState:e})=>(0,f.Z)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8})),A=Z.forwardRef(function(e,t){let n=(0,b.Z)({props:e,name:"MuiListItemAvatar"}),{className:r}=n,s=(0,x.Z)(n,T),o=Z.useContext(h.Z),a=(0,f.Z)({},n,{alignItems:o.alignItems}),l=S(a);return(0,i.jsx)(P,(0,f.Z)({className:(0,v.Z)(l.root,r),ownerState:a,ref:t},s))});var w=n(44731),L=n(97484);let _=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],N=e=>{let{classes:t,inset:n,primary:i,secondary:r,dense:s}=e;return(0,g.Z)({root:["root",n&&"inset",s&&"dense",i&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},L.L,t)},O=(0,y.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver(e,t){let{ownerState:n}=e;return[{[`& .${L.Z.primary}`]:t.primary},{[`& .${L.Z.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>(0,f.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),k=Z.forwardRef(function(e,t){let n=(0,b.Z)({props:e,name:"MuiListItemText"}),{children:r,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:u,secondary:d,secondaryTypographyProps:c}=n,m=(0,x.Z)(n,_),{dense:g}=Z.useContext(h.Z),y=null!=l?l:r,I=d,C=(0,f.Z)({},n,{disableTypography:o,inset:a,primary:!!y,secondary:!!I,dense:g}),j=N(C);return null==y||y.type===p.Z||o||(y=(0,i.jsx)(p.Z,(0,f.Z)({variant:g?"body2":"body1",className:j.primary,component:null!=u&&u.variant?void 0:"span",display:"block"},u,{children:y}))),null==I||I.type===p.Z||o||(I=(0,i.jsx)(p.Z,(0,f.Z)({variant:"body2",className:j.secondary,color:"text.secondary",display:"block"},c,{children:I}))),(0,i.jsxs)(O,(0,f.Z)({className:(0,v.Z)(j.root,s),ownerState:C,ref:t},m,{children:[y,I]}))});var M=n(79072),D=n(49837),R=n(62443),E=n(10667),z=n(9473),B=n(18424),V=n(46160),F=n(3690),W=n(42734),H=n(89829),U=n(52909),X=n(32945),$=n(79635),J=n(68045);let Q=(0,Z.forwardRef)(function(e,t){return(0,i.jsx)(r.Z,{ref:t,...e})}),q=e=>{let{id:t}=e,[n,r]=(0,Z.useState)(null),[x,f]=(0,Z.useState)(!1),[v,g]=(0,Z.useState)(!1),[h,y]=(0,Z.useState)(!1),[b,I]=(0,Z.useState)(!1),[C,j]=(0,Z.useState)([]),[T,S]=(0,Z.useState)([]),[P,L]=(0,Z.useState)([]),_=(0,z.I0)(),N=(0,z.v9)(e=>e.courses),O=(0,z.v9)(e=>e.users),M=(0,B.a)(),D=M.token,R=Boolean(n);(0,Z.useEffect)(()=>{_((0,U.aD)({token:D,course_id:t}))},[_,t,D]),(0,Z.useEffect)(()=>{let e=P.map(e=>({value:e.id.toString(),label:e.name}));S(e)},[P]),(0,Z.useEffect)(()=>{let e=O.allUsers.filter(e=>"associate"==e.type).map(e=>({value:e.id,label:e.name}));e&&j(e)},[O.allUsers]),(0,Z.useEffect)(()=>{let e=N.usersAssignedToCourse.filter(e=>e.id===t)[0];e&&L(e.users)},[N.usersAssignedToCourse,t]);let E=()=>{_((0,U.A)({token:D,course_id:t}))},X=()=>{q(),f(!0)},$=e=>{r(e.currentTarget)},q=()=>{r(null)},G=()=>{q(),g(!0)},K=()=>{q(),y(!0)},Y=e=>{let n=Object.values(e.input[0])[0];_((0,U.JO)({token:D,course_id:t,user_id:parseInt(n)}))},ee=()=>{q(),I(!0)},et=e=>{let n=Object.values(e.input[0])[0];_((0,U.NB)({token:D,course_id:t,user_id:parseInt(n)}))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{size:"small",onClick:$,children:(0,i.jsx)(V.Z,{})}),(0,i.jsxs)(o.Z,{keepMounted:!0,anchorEl:n,open:R,onClose:q,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,i.jsxs)(a.Z,{onClick:X,children:[(0,i.jsx)(F.Z,{fontSize:"small",sx:{mr:2}}),"Delete"]}),(0,i.jsxs)(a.Z,{onClick:G,children:[(0,i.jsx)(F.Z,{fontSize:"small",sx:{mr:2}}),"List Associates"]}),(0,i.jsxs)(a.Z,{onClick:K,children:[(0,i.jsx)(F.Z,{fontSize:"small",sx:{mr:2}}),"Assign Associate to Course"]}),(0,i.jsxs)(a.Z,{onClick:ee,children:[(0,i.jsx)(F.Z,{fontSize:"small",sx:{mr:2}}),"Remove Associate from Course"]}),(0,i.jsx)(J.Z,{dialogTitle:"Remove Associate from Course",isOpen:b,setIsOpen:I,onSubmit:et,submitButtonText:"Remove",inputs:[{inputId:"associate-to-remove",inputType:"select",inputLabel:"Associate to Remove",inputLabelId:"associate-to-remove-label",menuItems:T,gridProps:{md:9}}]}),(0,i.jsx)(J.Z,{isOpen:h,setIsOpen:y,dialogTitle:"Assign Associate to Course",submitButtonText:"Assign",onSubmit:Y,inputs:[{inputId:"associate-to-assign",inputType:"select",inputLabel:"Associate To Assign",inputLabelId:"associate-to-assign-label",menuItems:C,gridProps:{md:9}}]}),(0,i.jsx)(H.Z,{agreeText:"Confirm",dialogText:"Confirm Detete This Course",dialogTitle:"Confirm Delete",disagreeText:"Cancel",isOpen:x,setOpen:f,setOnAgree:E}),(0,i.jsx)(l.Z,{fullWidth:!0,open:v,maxWidth:"md",scroll:"body",onClose:()=>g(!1),TransitionComponent:Q,onBackdropClick:()=>g(!1),children:(0,i.jsxs)(u.Z,{sx:{px:{xs:8,sm:15},py:{xs:8,sm:12.5},position:"relative"},children:[(0,i.jsx)(s.Z,{size:"small",onClick:()=>g(!1),sx:{position:"absolute",right:"1rem",top:"1rem"},children:(0,i.jsx)(W.Z,{})}),(0,i.jsx)(d.Z,{sx:{mb:4,textAlign:"center"},children:(0,i.jsx)(p.Z,{variant:"h5",sx:{mb:3},children:"Associate Assigned To This Course"})}),(0,i.jsx)(p.Z,{variant:"h6",children:"".concat(P.length," Associates")}),(0,i.jsx)(c.Z,{dense:!0,sx:{mb:3},children:P.map(e=>(0,i.jsxs)(m.ZP,{sx:{px:0,py:2,display:"flex",flexWrap:"wrap"},children:[(0,i.jsx)(A,{children:(0,i.jsx)(w.Z,{src:"/images/avatars/1.png",alt:e.name})}),(0,i.jsx)(k,{sx:{m:0},primary:e.name,secondary:e.email})]},e.name))})]})})]})]})},G=[{flex:.3,field:"name",headerName:"Course Name",renderCell(e){let{row:t}=e;return(0,i.jsx)(p.Z,{variant:"body2",children:t.name})}},{flex:.3,field:"price",headerName:"Course Price",renderCell(e){let{row:t}=e;return(0,i.jsxs)(p.Z,{variant:"body2",children:["AED ",t.price]})}},{flex:.3,field:"duration_in_hours",headerName:"Duration",renderCell(e){let{row:t}=e;return(0,i.jsxs)(p.Z,{variant:"body2",children:[t.duration_in_hours," Hours"]})}},{flex:.1,minWidth:90,sortable:!1,field:"actions",headerName:"Actions",renderCell(e){let{row:t}=e;return(0,i.jsx)(q,{id:t.id})}}];var K=function(){let[e,t]=(0,Z.useState)([]),[n,r]=(0,Z.useState)(10),[s,o]=(0,Z.useState)(""),[a,l]=(0,Z.useState)(!1),u=(0,z.I0)(),d=(0,z.v9)(e=>e.courses),p=(0,B.a)(),c=p.token,m=e=>{o(e)};(0,Z.useEffect)(()=>{u((0,U.gS)({token:c})),u((0,$.Qc)({token:c}))},[u,c]),(0,Z.useEffect)(()=>{let e=d.allCourses.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.price.toString().toLowerCase().includes(s.toLowerCase())||e.duration_in_hours.toString().toLowerCase().includes(s.toLowerCase()));t(e)},[s,d.allCourses]);let x=e=>{let t=Object.values(e.input[0])[0],n=Object.values(e.input[1])[0],i=Object.values(e.input[2])[0];u((0,U.P6)({token:c,name:t,price:parseInt(n),duration_in_hours:parseInt(i)}))},f=()=>{l(!0)};return(0,i.jsxs)(M.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(M.ZP,{item:!0,xs:12}),(0,i.jsx)(M.ZP,{item:!0,xs:12,children:(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(E.Z,{exportFileName:"Courses",exportData:(()=>{let t=e.map(e=>({Name:e.name,Price:e.price,Duration:e.duration_in_hours}));return t})(),handleFilter:m,searchBoxText:"Search Courses",value:s,actionButtonText:"Create Course",actionButtonDrawerToggle:f,actionButtonType:"drawer"}),(0,i.jsx)(R._,{autoHeight:!0,pagination:!0,rows:e,columns:G,disableSelectionOnClick:!0,pageSize:Number(n),rowsPerPageOptions:[10,25,50],onPageSizeChange:e=>r(e)})]})}),(0,i.jsx)(X.Z,{drawerTitle:"New Course",isOpen:a,setIsOpen:l,onSubmit:x,submitButtonText:"Create",inputs:[{inputId:"course-name-input",inputLabel:"Course Name",inputLabelId:"course-name-input-label",inputType:"text",gridProps:{mb:6}},{inputId:"price-number",inputLabel:"Course Price",inputLabelId:"price-number-label",inputType:"number",gridProps:{mb:6}},{inputId:"course-duration-input",inputLabel:"Course Duration ( In Hours )",inputLabelId:"course-duration-input-label",inputType:"number",gridProps:{mb:6}}]})]})}},32945:function(e,t,n){"use strict";var i=n(85893),r=n(64631),s=n(67074),o=n(29630),a=n(61953),l=n(87536),u=n(42734),d=n(48621),p=n(39673),c=n(40883),m=n(75084),x=n(67294);let f=(0,s.ZP)(a.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(3,4),justifyContent:"space-between",backgroundColor:t.palette.background.default}}),Z=e=>{var t,n,s,Z,v,g;let h=(()=>{let t={input:[]};return e.inputs.forEach(e=>{let n={};if("select-multiple"===e.inputType)n[e.inputId]=[];else{var i;n[e.inputId]=null!==(i=e.defaultValue)&&void 0!==i?i:""}t.input.push(n)}),t})(),{reset:y,control:b,watch:I,handleSubmit:C,formState:{errors:j}}=(0,l.cI)({defaultValues:h,mode:"onChange"}),T=t=>{e.setIsOpen(!1),y(),e.onSubmit(t)},S=()=>{e.setIsOpen(!1),y()},P=t=>{var n;return null===(n=e.inputs.find(e=>e.inputId===t))||void 0===n?void 0:n.menuItems},A=I();return(0,x.useEffect)(()=>{e.inputs.forEach(e=>{e.onChange&&e.onChange(A.input)})},[A]),(0,i.jsxs)(r.ZP,{open:e.isOpen,anchor:"right",variant:"temporary",onClose:S,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,i.jsxs)(f,{children:[(0,i.jsx)(o.Z,{variant:"h6",children:e.drawerTitle}),(0,i.jsx)(u.Z,{fontSize:"small",onClick:S,sx:{cursor:"pointer"}})]}),(0,i.jsx)(a.Z,{sx:{p:5},children:(0,i.jsxs)("form",{onSubmit:C(T),children:[e.inputs.map((e,r)=>{var s,o;return"select"===e.inputType?(0,i.jsx)(p.Z,{defaultValue:e.defaultValue,name:"input.".concat(r,".").concat(e.inputId),label:e.inputLabel,labelId:e.inputLabelId,inputId:e.inputId,menuItems:null!==(t=P(e.inputId))&&void 0!==t?t:[],control:b,description:"".concat(e.inputId,"-description"),error:null==j?void 0:null===(s=j.input)||void 0===s?void 0:null===(o=s[r])||void 0===o?void 0:o[e.inputId],gridProps:null!==(n=e.gridProps)&&void 0!==n?n:{}},r):null}),e.inputs.map((e,t)=>{var n,r;return"select-multiple"===e.inputType?(0,i.jsx)(p.Z,{multiple:!0,defaultValue:e.defaultValue,name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,labelId:e.inputLabelId,inputId:e.inputId,menuItems:null!==(s=P(e.inputId))&&void 0!==s?s:[],control:b,description:"".concat(e.inputId,"-description"),error:null==j?void 0:null===(n=j.input)||void 0===n?void 0:null===(r=n[t])||void 0===r?void 0:r[e.inputId],gridProps:null!==(Z=e.gridProps)&&void 0!==Z?Z:{}},t):null}),e.inputs.map((e,t)=>{var n,r;return"text"===e.inputType||"textarea"==e.inputType||"number"==e.inputType||"email"==e.inputType?(0,i.jsx)(d.Z,{defaultValue:e.defaultValue,name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,control:b,description:"".concat(e.inputId,"-description"),error:null==j?void 0:null===(n=j.input)||void 0===n?void 0:null===(r=n[t])||void 0===r?void 0:r[e.inputId],type:e.inputType,gridProps:null!==(v=e.gridProps)&&void 0!==v?v:{},rows:"textarea"===e.inputType?6:1,multiline:"textarea"===e.inputType,rules:e.rules},t):null}),e.inputs.map((e,t)=>{var n,r;return"date"===e.inputType||"datetime"===e.inputType||"time"===e.inputType?(0,i.jsx)(c.Z,{defaultValue:e.defaultValue,name:"input.".concat(t,".").concat(e.inputId),label:e.inputLabel,control:b,type:e.inputType,description:"".concat(e.inputId,"-description"),error:null==j?void 0:null===(n=j.input)||void 0===n?void 0:null===(r=n[t])||void 0===r?void 0:r[e.inputId],gridProps:null!==(g=e.gridProps)&&void 0!==g?g:{},time:"datetime"===e.inputType},t):null}),(0,i.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(m.Z,{size:"large",type:"submit",variant:"contained",sx:{mr:3},children:e.submitButtonText}),(0,i.jsx)(m.Z,{size:"large",variant:"outlined",color:"secondary",onClick:S,children:"Cancel"})]})]})})]})};t.Z=Z}},function(e){e.O(0,[891,842,536,215,292,981,774,888,179],function(){return e(e.s=29770)}),_N_E=e.O()}]);