(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{67564:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/source-performance",function(){return a(68516)}])},68516:function(e,t,a){"use strict";a.r(t);var l=a(85893),n=a(67836),r=a(29630),s=a(79072),d=a(49837),i=a(59742),c=a(91359),o=a(75084),u=a(62443),f=a(67294),h=a(10667),x=a(9473),_=a(18424),g=a(93249),m=a(45225),y=a(9198),S=a.n(y),j=a(42298);a(95828);let Z=(0,f.forwardRef)((e,t)=>{let a=null!==e.start?(0,j.default)(e.start,"yyyy/MM/dd"):"",r=null!==e.end?" - ".concat((0,j.default)(e.end,"yyyy/MM/dd")):null,s="".concat(a).concat(null!==r?r:"");null===e.start&&e.dates.length&&e.setDates&&e.setDates([]);let d={...e};return delete d.setDates,(0,l.jsx)(n.Z,{fullWidth:!0,inputRef:t,...d,label:e.label||"",value:s})}),C=[{flex:.1,field:"source",headerName:"Source",renderCell(e){let{row:t}=e;return(0,l.jsx)(r.Z,{variant:"body2",children:t.source})}},{flex:.1,field:"total_leads",headerName:"Total Leads",renderCell(e){let{row:t}=e;return(0,l.jsx)(r.Z,{variant:"body2",children:t.total_leads.toLocaleString()})}},{flex:.1,field:"converted_leads",headerName:"Converted Leads",renderCell(e){let{row:t}=e;return(0,l.jsx)(r.Z,{variant:"body2",children:t.converted_leads.toLocaleString()})}},{flex:.1,field:"failed_leads",headerName:"Failed Leads",renderCell(e){let{row:t}=e;return(0,l.jsx)(r.Z,{variant:"body2",children:t.failed_leads.toLocaleString()})}},{flex:.1,field:"remaining_leads",headerName:"Remaining Leads",renderCell(e){let{row:t}=e;return(0,l.jsx)(r.Z,{variant:"body2",children:t.remaining_leads.toLocaleString()})}},{flex:.1,field:"efficiency",headerName:"Efficiency",renderCell(e){let{row:t}=e;return(0,l.jsxs)(r.Z,{variant:"body2",children:[t.efficiency.toLocaleString(),"%"]})}}];t.default=function(){let[e,t]=(0,f.useState)([]),[a,n]=(0,f.useState)(10),[r,y]=(0,f.useState)(""),[b,v]=(0,f.useState)(null),[p,L]=(0,f.useState)(null),[N,P]=(0,f.useState)([]),w=(0,x.I0)(),D=(0,x.v9)(e=>e.dashboard),k=(0,_.a)(),E=k.token,M=e=>{y(e)};(0,f.useEffect)(()=>{let e=D.source_data.filter(e=>e.source.toLowerCase().includes(r.toLowerCase())||e.total_leads.toString().includes(r)||e.converted_leads.toString().includes(r)||e.failed_leads.toString().includes(r)||e.remaining_leads.toString().includes(r)||e.efficiency.toString().includes(r));t(e)},[r,D.source_data]);let F=e=>{let[t,a]=e;null!==t&&null!==a&&P(e),L(t),v(a)},R=()=>{if(p&&b){let e=(0,j.default)(p,"yyyy-MM-dd"),t=(0,j.default)(b,"yyyy-MM-dd");w((0,g.DK)({token:E,start_date:e,end_date:t}))}};return(0,l.jsxs)(s.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(i.Z,{title:"Filters"}),(0,l.jsx)(c.Z,{children:(0,l.jsxs)(s.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(m.Z,{children:(0,l.jsx)(S(),{isClearable:!0,selectsRange:!0,monthsShown:2,endDate:b,selected:p,startDate:p,shouldCloseOnSelect:!1,id:"date-range-picker-months",onChange:F,customInput:(0,l.jsx)(Z,{dates:N,setDates:P,label:"Date Range",end:b,start:p})})})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(o.Z,{sx:{mb:2},onClick:R,variant:"contained",children:"Fetch Data"})})]})})]})}),(0,l.jsx)(s.ZP,{item:!0,xs:12}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(h.Z,{exportFileName:"Source Performance",exportData:(()=>{let t=e.map(e=>({Source:e.source,"Total Leads":e.total_leads,"Converted Leads":e.converted_leads,"Failed Leads":e.failed_leads,"Remaining Leads":e.remaining_leads,Efficiency:e.efficiency+"%"}));return t})(),handleFilter:M,searchBoxText:"Search",value:r}),(0,l.jsx)(u._,{autoHeight:!0,pagination:!0,rows:e,columns:C,disableSelectionOnClick:!0,pageSize:Number(a),rowsPerPageOptions:[10,25,50],onPageSizeChange:e=>n(e)})]})})]})}}},function(e){e.O(0,[891,661,962,286,774,888,179],function(){return e(e.s=67564)}),_N_E=e.O()}]);